name: Build MIPS Diagnostic
on: [push]

jobs:
  build_mipsel:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Code
        uses: actions/checkout@v4

      - name: Install MIPS Toolchain
        run: |
          sudo apt-get update
          sudo apt-get install -y gcc-mipsel-linux-gnu

      - name: Compile Static MIPS Binary
        run: |
          # mipsel-linux-gnu-gcc targets 32-bit Little Endian MIPS
          # -static is essential for portable embedded binaries
          mipsel-linux-gnu-gcc -static -march=mips32 sysinfo.c -o sysinfo_mips

      - name: Upload MIPS Diagnostic
        uses: actions/upload-artifact@v4
        with:
          name: diagnostic-mips
          path: sysinfo_mips
